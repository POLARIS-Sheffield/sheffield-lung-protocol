 <!DOCTYPE html>
 <html>
    <head>
        <link rel="shortcut icon" href="icons/GE.png">
        <link rel="stylesheet" href="styles.css">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <link href="https://cdn.jsdelivr.net/css-toggle-switch/latest/toggle-switch.css" rel="stylesheet" />

        <title>Lung Protocol</title>
    </head>
    <body onload="document.getElementById('defaultOpen').click();">
    <div id="page-container">
        <div id="content-wrap">
            <div class="header-img-left"></div>
            <h1 style="top:3em;" class="center">Sheffield Lung Protocol</h1>
            <div class="header-img-right"></div>
        
            <!-- Search-Filter UI -->
            <div style="top:19em; width:25em;" class="center">
                <form>
                    <fieldset class="fieldset" style="text-align:center;"data-role="controlgroup" data-type="horizontal">
                        <input id="on" name="state-d" type="radio" checked="" />
                        <label for="on" onclick="createTable()">1.5T</label>
                        <input style="margin-left: 9px;" id="off" name="state-d" type="radio" />
                        <label for="off" onclick="createTable()">3T</label>
                        <!--<input type="checkbox" onclick="filterTa    ble()" id="proton" name="proton" checked>
                        <label for="proton">Proton</label>-->
                        <input style="margin-left: 42px;" type="checkbox" onclick="filterTable()" id="contrast" name="contrast" checked>
                        <label for="contrast">Contrast</label>
                        <input style="margin-left: 9px;" type="checkbox" onclick="filterTable()" id="xenon" name="xenon" checked>
                        <label for="xenon"><sup>129</sup>Xe</label>
                    </fieldset>
                    <input  class="fieldset" type="text" id="myInput" onkeyup="searchTable()" placeholder="Search for sequence.." title="Type in a sequence">
                </form>
            </div>
            <!-- Tab links --> 
            <div style="position:absolute; width:100%; top:2em;">
                <div class="dropdown">
                    <button onclick="dropdownFunction()" class="dropbtn">Select protocol</button>
                    <div id="myDropdown" class="dropdown-content">
                    <a id="defaultOpen" class="tablinks active" onclick="openTab(event, 'SEQtab')">All sequences</a>
                    <a class="tablinks" onclick="openTab(event, 'ILDtab')">Interstitial Lung Disease</a>
                    <a class="tablinks" onclick="openTab(event, 'CFtab')">Cystic Fibrosis</a>
                    <a class="tablinks" onclick="openTab(event, 'COPDtab')">Chronic Obstructive Pulmonary Disease</a>
                    <a class="tablinks" onclick="openTab(event, 'ASTHMAtab')">Asthma</a>
                    <!--<a class="tablinks" onclick="openTab(event, 'PVtab')">Pulmonary Vascular Diseases</a>-->
                    </div>
                </div>
            </div>

            <!-- Tab content -->
            <div id="table_container" style="position:relative; margin-left:1%;width:98%; top:19.5em;">

                <div id="SEQtab" class="tabcontent">
                    <h3>All sequences</h3>
                    <table class="myTable" id="SEQ">
                    </table>    
                </div>

                <div id="ILDtab" class="tabcontent">
                    <h3>Interstitial Lung Disease</h3>
                    <table class="myTable" id="ILD">
                    </table>
                </div>
            
                <div id="CFtab" class="tabcontent">
                    <h3>Cystic Fibrosis</h3>
                    <table class="myTable" id="CF">
                    </table>
                </div>
                <div id="COPDtab" class="tabcontent">
                    <h3>COPD</h3>
                    <table class="myTable" id="COPD">
                    </table>
                </div>
                <div id="ASTHMAtab" class="tabcontent">
                    <h3>Asthma</h3>
                    <table class="myTable" id="ASTHMA">
                    </table>
                </div>
                <div id="PVtab" class="tabcontent">
                    <h3>Pulmonary Vascular Diseases</h3>
                    <table class="myTable" id="PV">
                    </table>    
                </div>
            </div>
        </div>
        </div>
         <script>
            function openTab(evt, diseaseName) {
                // Declare all variables
                var i, tabcontent, tablinks;

                // Get all elements with class="tabcontent" and hide them
                tabcontent = document.getElementsByClassName("tabcontent");
                for (i = 0; i < tabcontent.length; i++) {
                    tabcontent[i].style.display = "none";
                }

                // Get all elements with class="tablinks" and remove the class "active"
                tablinks = document.getElementsByClassName("tablinks");
                for (i = 0; i < tablinks.length; i++) {
                    tablinks[i].className = tablinks[i].className.replace(" active", "");
                }
                // Show the current tab, and add an "active" class to the button that opened the tab
                document.getElementById(diseaseName).style.display = "block";
                evt.currentTarget.className += " active";

                //Reset search field
                input = document.getElementById("myInput");
                input.value="";

                createTable();
            }

            // Make sequences

            var sequences_1_5T_Product = {
                0:  ["Product"],
                1:  ["Product"],
                2:  ["Product"],
                3:  ["ATSM"],
                4:  ["ATSM"],
                5:  ["Product"],
                6:  ["Product"],
                7:  ["Product"],
                8:  ["Product"],
                9:  ["Research"],
                10: ["Product"],
                11: ["Product"],
                12: ["Research"],
                13: ["Research"],
                14: ["Research"],
                15: ["Research"],
                16: ["Research"]
            }

            var sequences_1_5T_Sequence = {
                0:  ["Localizer"],
                1:  ["Calibration"],
                2:  ["ZTE"],
                3:  ["ZTE4D"],
                4:  ["UTE"],
                5:  ["3D SPGR"],
                6:  ["PROPELLER"],
                7:  ["FIESTA"],
                8:  ["Dynamic SPGR Imaging"],
                9:  ["T1-mapping (Look-Locker)"],
                10: ["Variable FA 3D SPGR"],
                11: ["DCE Contrast"],
                12: ["Xe QA"],
                13: ["Xe FA Calibration"],
                14: ["Xe 3D Ventilation"],
                15: ["Xe 3D Dissolved"],
                16: ["Xe 3D DWI"]
            }

            var sequences_3T_Sequence = {
                0:  ["Localizer"],
                1:  ["Calibration"],
                2:  ["ZTE"],
                3:  ["ZTE4D"],
                4:  ["UTE"],
                5:  ["3D SPGR"],
                6:  ["PROPELLER"],
                7:  ["FIESTA"],
                8:  ["Dynamic SPGR Imaging"],
                9:  ["T1-mapping (Look-Locker)"],
                10: ["Variable FA 3D SPGR"],
                11: ["DCE Contrast"],
                12: ["Xe QA"],
                13: ["Xe FA"],
                14: ["Xe 3D Ventilation"],
                15: ["Xe 3D Dissolved"],
                16: ["Xe 3D DWI"]
            }

            var sequences_1_5T_Details = {
                0:  ["protocol_sequences/Localizer.png"],
                1:  ["protocol_sequences/CalBH.png"],
                2:  ["protocol_sequences/ZTE3D.png"],
                3:  ["protocol_sequences/ZTE4D.png"],
                4:  ["protocol_sequences/UTE.png"],
                5:  ["protocol_sequences/3DSPGR.png"],
                6:  ["protocol_sequences/PROPELLER.png"],
                7:  ["protocol_sequences/FIESTA.png"],
                8:  ["protocol_sequences/PREFUL.png"],
                9:  ["protocol_sequences/T1_mapping.png"],
                10: ["protocol_sequences/DCE_non_contrast.png"],
                11: ["protocol_sequences/DCE.png"],
                12: ["protocol_sequences/XeQA.png"],
                13: ["protocol_sequences/XeFA.png"],
                14: ["protocol_sequences/Xe3DVentilation.png"],
                15: ["protocol_sequences/Xe3DDissolved.png"],
                16: ["protocol_sequences/Xe3DDiffusion.png"]
            }

            var sequences_1_5T_DetailsText = {
                0:  ["Protocol 1.5T"],
                1:  ["Protocol 1.5T"],
                2:  ["Protocol 1.5T"],
                3:  ["Protocol 1.5T"],
                4:  ["Protocol 1.5T"],
                5:  ["Protocol 1.5T"],
                6:  ["Protocol 1.5T"],
                7:  ["Protocol 1.5T"],
                8:  ["Protocol 1.5T"],
                9:  ["Protocol 1.5T"],
                10: ["Protocol 1.5T"],
                11: ["Protocol 1.5T"],
                12: ["Protocol 1.5T"],
                13: ["Protocol 1.5T"],
                14: ["Protocol 1.5T"],
                15: ["Protocol 1.5T"],
                16: ["Protocol 1.5T"]
            }

            var sequences_1_5T_Images = {
                0:  ["/Localizer.png"],
                1:  ["/Calibration.png"],
                2:  ["/ZTE.png"],
                3:  ["/ZTE4D.png"],
                4:  ["/UTE.png"],
                5:  ["/3DSPGR_TLC.png","/3DSPGR_RV.png"],
                6:  ["/PROPELLER.png"],
                7:  ["/FIESTA.png"],
                8:  ["/PREFUL.png"],
                9:  ["/T1_mapping.png"],
                10: ["/DCE_non_contrast.png"],
                11: ["/DCE.png","/DCE_map.png"],
                12: ["/XeQA.png"],
                13: ["/XeFA.png"],
                14: ["/Xe3DVentilation.png"],
                15: ["/Xe3DDissolved.png","/Xe3DDissolved_RBC.png","/Xe3DDissolved_RBC_TP.png"],
                16: ["/Xe3DDiffusion.png","/Xe3DDiffusion_ADC.png"]
            }

            var sequences_3T_Details = {
                0:  ["protocol_sequences/Localizer.png"],
                1:  ["protocol_sequences/CalBH.png"],
                2:  ["protocol_sequences/ZTE3D.png"],
                3:  ["protocol_sequencesZTE4D.png"],
                4:  ["protocol_sequences/UTE.png"],
                5:  ["protocol_sequences/3DSPGR.png"],
                6:  ["protocol_sequences/PROPELLER.png"],
                7:  ["protocol_sequences/FIESTA.png"],
                8:  ["protocol_sequences/PREFUL.png"],
                9:  ["protocol_sequences/T1_mapping.png"],
                10: ["protocol_sequences/DCE_non_contrast.png"],
                11: ["protocol_sequences/DCE.png"],
                12: ["protocol_sequences/XeQA.png"],
                13: ["protocol_sequences/XeQFApng"],
                14: ["protocol_sequences/Xe3DVentilation.png"],
                15: ["protocol_sequences/Xe3DDissolved.png"],
                16: ["protocol_sequences/Xe3DDiffusion.png"]
            }

            var sequences_3T_Images = {
                0:  ["/Localizer.png"],
                1:  ["/Calibration.png"],
                2:  ["/ZTE.png"],
                3:  ["/ZTE4D.png"],
                4:  ["/UTE.png"],
                5:  ["/3DSPGR_TLC.png","/3DSPGR_RV.png"],
                6:  ["/PROPELLER.png"],
                7:  ["/FIESTA.png"],
                8:  ["/PREFUL.png"],
                9:  ["/T1_mapping.png"],
                10: ["/DCE_non_contrast.png"],
                11: ["/DCE.png","/DCE_map.png"],
                12: ["/XeQA.png"],
                13: ["/XeFA.png"],
                14: ["/Xe3DVentilation.png"],
                15: ["/Xe3DDissolved.png","/Xe3DDissolved_RBC.png","/Xe3DDissolved_RBC_TP.png"],
                16: ["/Xe3DDiffusion.png","/Xe3DDiffusion_ADC.png"]
            }

            var sequences_Instructions = {
                0:  ["<b>Localizer</b><br><br> Breath-hold FIESTA scan with slices in the 3 anatomical planes for patient localization. <br><br> Set a large FOV to cover the whole chest."],
                1:  ["<b>Calibration scan</b><br><br> Allows for ASSET and PURE options in the protocol.<br><br>Acquire images during breathhold. For repeatibility, control the inhaled volume using a bag of air."],
                2:  ["<b>ZTE</b><br><br> Silent high resolution proton density weighted imaging. <br><br> Acquire images during free-breathing, using the respiratory bellows. Adjust respiratory gating for inspiration/expiration."],
                3:  ["<b>ZTE4D (ATSM)</b><br><br> Silent high resolution proton density weighted imaging with retrospective respiratory binning. <br><br> Acquire images during free-breathing, using the respiratory bellows. Select 2 respiratory phases to reconstruct images in both inspiration and expiration, or more to reconstruct intermediate phases. <br><br>Reference:<br><br><a target='_blank' href='https://doi.org/10.1007/s10334-014-0459-y'>Gibiino, F. et al.<br>Free-breathing, zero-TE MR lung imaging.<br>Magn Reson Mater Phy 28, 207-215 (2015).</a>"],
                4:  ["<b>UTE (Research sequence) </b><br><br> High resolution proton density weighted imaging with prospective or retrospective gating.<br><br> Set trigger to acquire during expiration. Acquire images during free-breathing, using the respiratory bellows. Typically acquired with prospective respiratory gating to the expiration phase. <br><br>Reference:<br><br><a target='_blank' href='https://doi.org/10.1002/mrm.24570'>Johnson, KM et al.<br>Optimized 3D ultrashort echo time pulmonary MRI.<br>Magn Reson Med 70(5), 1241—1250 (2013).</a>"],
                5:  ["<b>3D SPGR</b><br><br> The inherent T2* contrast allows for distinction of aerated lung tissue. <br><br> Acquire in separate breathholds at inspiration and expiration to estimate the total lung capacity (TLC) and residual volume (RV). <br><br>For repeatibility, control the inhaled volume using a bag of air during inspiration. <br><br>Reference:<br><br><a target='_blank' href='https://doi.org/10.1097/01.rli.0000250735.92266.6b'>Swift, AJ et al.<br>Rapid lung volumetry using ultrafast dynamic magnetic resonance imaging during forced vital capacity maneuver: correlation with spirometry.<br>Invest Radiol 42(1), 37—41 (2007).</a>"],
                6:  ["<b>PROPELLER</b><br><br> Radial-based structural high resolution T2 weighted imaging. Intense areas are linked to presence of mucus and inflammation.<br><br> Set fat suppresion and respiratory trigger to expiration.<br><br>Reference:<br><br><a target='_blank' href='https://doi.org/10.1007/s00330-015-3850-9'>Ciet, P et al.<br>Assessment of CF lung disease using motion corrected PROPELLER MRI: a comparison with CT. European Radiology 26, 780—787 (2016).</a>"],
                7:  ["<b>FIESTA</b><br><br> Balanced steady state free precession sequence with inherent contrast is proportional to the ratio T2/T1, providing bright signal in mucus and blood.<br><br>Acquire images during breathhold. For repeatibility, control the inhaled volume using a bag of air during inspiration.<br><br>Reference:<br><br><a target='_blank' href='https://doi.org/10.1148/radiol.12110990'>Rajaram S et al.<br>Lung Morphology Assessment with Balanced Steady-State Free Precession MR Imaging Compared with CT.<br>Radiology 263(2) (2012).</a>"],
                8:  ["<b>Dynamic SPGR Imaging</b><br><br>(Research post-processing required. Contact <a target='_blank' href='mailto:polaris@sheffield.ac.uk'>polaris@sheffield.ac.uk</a> for access)<br><br> High-temporal resolution SPGR imaging can be combined with Fourier Decomposition-based postprocessing methods for contrast-free lung perfusion (Q) and ventilation (V) assessment.<br><br>If <sup>129</sup>Xe imaging is used in the protocol, plan this sequence to match the <sup>129</sup>Xe planning for optimal comparison of derived ventilation images.<br><br>Reference:<br><br><a target='_blank' href='https://doi.org/10.1002/mrm.26893'>Voskrebenzev, A et al.<br>Feasibility of quantitative regional ventilation and perfusion mapping with phase-resolved functional lung (PREFUL) MRI in healthy volunteers and COPD, CTEPH, and CF patients.<br>Magn Reson Med 79(4), 2306—2314 (2018).</a>"],
                9:  ["<b>T1-mapping (Look-Locker) (Research sequence).</b><br><br> 2D IR-based GRE sequence wherein several images are acquired rapidly during the recovery phase after an inversion pulse. T1 maps are then produced pixelwise from the dynamic image series.<br><br>This sequence can be used as part of an oxygen-enhanced (OE) imaging protocol to study the difference in T1-shortening effect when breathing 100% O2 vs. room air in patients with gas exchange limitation.<br><br>Reference:<br><br><a target='_blank' href='https://doi.org/10.1002/mrm.28342'>Saunders, LC et al. Free breathing lung T1 mapping using image registration in patients with idiopathic pulmonary fibrosis. Magn Reson Med 84(6), 3088—3102 (2020).</a>"],
                10: ["<b>Variable flip angle 3D SPGR.</b><br><br> The sequence is repeated 4 times with different flip angles (i.e., 2,4,10,30) to generate a baseline T1 map before acquiring the DCE with contrast.<br><br>The flip angle is set manually modifying the CV <i>ia_rf1</i>.<br><br>Acquire images during breathhold. For repeatibility, control the inhaled volume using a bag of air during inspiration."],
                11: ["<b>DCE Perfusion Imaging</b><br><br> Dynamic 3D GRE acquisition with TRICKS (~1 volume/second) acquired during the administration of a gadolinium bolus provides perfusion information. Post-processed maps allow for the identification of obstructed vessels, inflammation and fibrosis.<br><br>Acquire images during breathhold to measure the “first-pass” of the bolus, and subsequently dynamic 3D SPGR “second-pass” images to monitor bolus wash-out.<br><br>For repeatibility, control the inhaled volume using a bag of air during inspiration.<br><br>Calculate contrast dose at 0.05mls/kg - inject at 4mls/s.<br><br>Reference:<br><br><a target='_blank' href='https://doi.org/10.1086%2F674882'>Swift, AJ et al.<br>Dynamic Contrast-Enhanced Magnetic Resonance Imaging in Patients with Pulmonary Arterial Hypertension.<br>Pulmonary Circulation 4, 61—70 (2014).</a>"],
                12: ["<b>Xe QA<br>(Research sequence)</b><br><br> FID pulse-acquire sequence. Run on a phantom to make a quality assessment before running <sup>129</sup>Xe sequences in vivo."],
                13: ["<b>Xe FA calibration<br>(Research sequence)</b><br><br> Bloch-Siegert phase shift based spectroscopic sequence to calibrate the radiofrequency power for non-proton nuclei.<br><br>This sequence is run at the beginning of each <sup>129</sup>Xe in vivo MRI session to calibrate the transmit gain on a patient specific basis.<br><br>Reference:<br><br><a target='_blank' href='https://doi.org/10.1002/nbm.1657'>Schulte, RF et al. Transmit gain calibration for nonproton MR using the Bloch-Siegert shift. NMR in Biomed 24(9), 1068—1072 (2011).</a>"],
                14: ["<b>Xe 3D SSFP Ventilation<br>(Research sequence)</b><br><br> High resolution 3D FIESTA sequence to generate ventilation maps of lung ventilation.<br><br>Localized ventilation defects can be visualized, characteristic of obstructive lung diseases.<br><br>References:<br><br><a target='_blank' href='https://doi.org/10.1002/mrm.25732'>Stewart, NJ et al.<br>Feasibility of human lung ventilation imaging using highly polarized naturally abundant xenon and optimized three-dimensional steady-state free precession.<br>Magn Reson Med 74(2), 346—352 (2015).</a><br><br><a target='_blank' href='http://dx.doi.org/10.1136/thoraxjnl-2016-208948'>Marshall, H et al.<br>Detection of early subclinical lung disease in children with cystic fibrosis by lung ventilation imaging with hyperpolarised gas MRI.<br>Thorax 72(8), 760—762 (2017).</a>"],
                15: ["<b>Xe 3D Dissolved-Phase <sup>129</sup>Xe Gas-Exchange Imaging<br>(Research sequence)</b><br><br>IDEAL spectroscopic imaging sequence to detect the relative signals of <sup>129</sup>Xe dissolved in the lung tissue/plasma (TP) and red blood cells (RBC), relative to the gas phase <sup>129</sup>Xe in the alveoli.<br><br>Signal ratio maps (RBC/TP, TP/Gas, RBC/Gas) are sensitive to interstitial tissue thickening and impairment of gas exchange, characteristic of pulmonary disorders such as ILD/IPF.<br><br>Reference:<br><br><a target='_blank' href='https://doi.org/10.1002/mrm.28609'>Collier, GJ et al.<br>Dissolved 129Xe lung MRI with four-echo 3D radial spectroscopic imaging: Quantification of regional gas transfer in idiopathic pulmonary fibrosis.<br>Magn Reson Med 85(5), 2622—2633 (2021).</a>"],
                16: ["<b>Xe 3D DWI<br>(Research sequence)</b><br><br>3D multiple b-value diffusion-weighted SPGR sequence with arbitrary undersampling and compressed sensing reconstruction for diffusion mapping in a single breath-hold.<br><br>The apparent diffusion coefficient (ADC) and the mean diffusive length scale (LmD) from diffusion morphometry modelling are measures of gas diffusion in the airspaces, where restrictions by tissue boundaries provide information about lung microstructure down to the alveolar level.<br><br>References:<br><br><a target='_blank' href='https://doi.org/10.1002/mrm.26960'>Chan HF et al.<br>3D diffusion-weighted 129Xe MRI for whole lung morphometry.<br>Magn Reson Med 79(6), 2986—2995 (2018).</a><br><br><a target='_blank' href='https://doi.org/10.1148/radiol.2019181714'>Chan HF et al.<br>Airway Microstructure in Idiopathic Pulmonary Fibrosis: Assessment at Hyperpolarized 3He Diffusion-weighted MRI.<br>Radiology 291, 223—229 (2019).</a>"]
            }

            var references= {
                16: ["https://erj.ersjournals.com/content/54/suppl_63/PA3157"]
            }

            var sequences_Protocol = {
                0: ["SEQ","ILD","CF","COPD","ASTHMA","PV"],
                1: ["SEQ","ILD","CF","COPD","ASTHMA","PV"],
                2: ["SEQ","ILD","CF","COPD","ASTHMA","PV"],
                3: ["SEQ",],
                4: ["SEQ",],
                5: ["SEQ","ILD","CF","COPD","ASTHMA","PV"],
                6: ["SEQ","ILD","CF"],
                7: ["SEQ","CF","PV"],
                8: ["SEQ","CF","COPD","ASTHMA"],
                9: ["SEQ","ILD","PV"],
                10: ["SEQ","ILD","COPD","PV"],
                11: ["SEQ","ILD","COPD","PV"],
                12: ["SEQ","ILD","CF","COPD","ASTHMA","PV"],
                13: ["SEQ","ILD","CF","COPD","ASTHMA","PV"],
                14: ["SEQ","CF",,"COPD","ASTHMA"],
                15: ["SEQ","ILD","COPD","ASTHMA","PV"],
                16: ["SEQ","ILD","COPD","ASTHMA"]
            }

            var sequences_Type = {
                0:  ["Proton"],
                1:  ["Proton"],
                2:  ["Proton"],
                3:  ["Proton"],
                4:  ["Proton"],
                5:  ["Proton"],
                6:  ["Proton"],
                7:  ["Proton"],
                8:  ["Proton"],
                9:  ["Proton"],
                10:  ["Proton","Contrast"],
                11: ["Proton","Contrast"],
                12: ["Xenon"],
                13: ["Xenon"],
                14: ["Xenon"],
                15: ["Xenon"],
                16: ["Xenon"]
            }

            var sequences_1_5T_FOV = {
                0:  ["40"],
                1:  ["32"],
                2:  ["34"],
                3:  ["34"],
                4:  ["48"],
                5:  ["42"],
                6:  ["46"],
                7:  ["48"],
                8:  ["48"],
                9:  ["40"],
                10: ["40"],
                11: ["40"],
                12: ["40"],
                13: ["40"],
                14: ["40"],
                15: ["40"],
                16: ["40"]
            }
            var sequences_1_5T_FA = {
                0:  ["40"],
                1:  ["32"],
                2:  ["34"],
                3:  ["34"],
                4:  ["48"],
                5:  ["42"],
                6:  ["46"],
                7:  ["48"],
                8:  ["48"],
                9:  ["40"],
                10: ["40"],
                11: ["40"],
                12: ["40"],
                13: ["40"],
                14: ["40"],
                15: ["40"],
                16: ["40"]
            }
            var sequences_1_5T_duration = {
                0:  ["15"],
                1:  ["15"],
                2:  ["360"],
                3:  ["360"],
                4:  ["360"],
                5:  ["20"],
                6:  ["240"],
                7:  ["15"],
                8:  ["490"],
                9:  ["X"],
                9:  ["30"],
                10: ["30"],
                11: ["10"],
                12: ["10"],
                13: ["10"],
                14: ["15"],
                15: ["16"],
                16: ["16"]
            }
            //Create table dynamically, just make sure all attributes have the same length.
            function createTable() {

                if( document.getElementById('on').checked)
                {
                    sequence_name = "sequences_1_5T_"
                }
                else
                {
                    sequence_name = "sequences_3T_"
                }

                var tabId=document.getElementsByClassName('active')[0].getAttribute('onclick').split(" ")[1].replace(/\W/g, '');
                var tableId = tabId.substring(0,tabId.length-3);
                document.getElementById(tableId).innerHTML = "";

                var list_rows = Object.keys(sequences_1_5T_Sequence); 

                /*if(tabId=="SEQtab")
                {
                    var attributes = ["Sequence","FOV","FA"];
                }
                else{
                    var attributes = ["Sequence","Details","Images"];
                }*/

                var attributes = ["Sequence","Images","Details"];

                const fragment = document.createDocumentFragment()
                //Header:
                const trheader= document.createElement('tr')
                trheader.setAttribute("class","header")
                
                if (window.innerWidth > 960) {
                    max_columns = attributes.length;
                }
                else{
                    max_columns = 1;
                }

                for (let column = 0; column<max_columns; column++){
                    const th = document.createElement('th')
                    th.textContent = attributes[column]
                    th.style.textAlign = "center";

                    trheader.appendChild(th)
                }

                fragment.appendChild(trheader)
                //Rows:
                for (let row = 0; row<list_rows.length; row++){ 
                    const tr = document.createElement('tr')
                    tr.setAttribute('id',"Row"+row);//To identify the added rows
                    tr.setAttribute('class',"Row"+row);//To identify the added rows

                    for (let column = 0; column<max_columns; column++){
                        const a = document.createElement('a')
                        const p = document.createElement('p')
                        const td = document.createElement('td')
                        td.setAttribute('onclick','openField(this,"'+tableId+'")');
                        td.style.textAlign = "center";

                        if(column==0)
                        {
                            if(max_columns==1)
                            {
                                td.setAttribute("width","100%");
                            }
                            else{
                                td.setAttribute("width","15%");
                            }
                            p.textContent = eval(sequence_name+ attributes[column]+"["+row+"]");//+ " ( " + eval(sequence_name+"Product["+row+"]") + " ) ";
                            td.appendChild(p)
                            
                        }
                        else{
                            if(column==1)
                            {
                                td.setAttribute("width","25%");
                            }
                            else if(column==2)
                            {
                                td.setAttribute("width","60%");
                            }
                        /* if(tabId=="SEQtab")
                            {
                                a.textContent = eval(sequence_name+ attributes[column]+"["+row+"]");
                            }
                            else{*/
                                a.textContent = attributes[column];
                                a.setAttribute("class", "detailslink");

                                /*if(attributes[column]=="Images")
                                {
                                    links = eval(sequence_name+attributes[column]+"["+row+"]");
                                    if(links.length==1)
                                    {
                                        a.href = "images/"+tableId+eval(sequence_name+attributes[column]+"["+row+"]");
                                    }
                                    else{
                                        a.href = "images/"+tableId+eval(sequence_name+attributes[column]+"["+row+"][0]");
                                    }
                                }
                                else{
                                    a.href = eval(sequence_name+attributes[column]+"["+row+"]");
                                    a.setAttribute('onclick', "window.open('"+eval(sequence_name+attributes[column]+"["+row+"]")+"'), 'newwindow', 'width=400, height=250'); return false;");
                                }*/
                            //}
                            td.appendChild(a)
                        }
                        td.setAttribute("type",sequences_Type[row])
                        tr.appendChild(td)
                    }

                    fragment.appendChild(tr)
                }
                
                const footer= document.createElement('footer');
                footer.setAttribute("class","stikybottom");
                footer.id="footer";
                const p= document.createElement('p');
                p.textContent = "Author: Dr. Jose de Arcos. Images and protocols courtesy of Professor Jim Wild, University of Sheffield. Contact: "
                const p2= document.createElement('p');
                p2.textContent = p.textContent + "polaris@sheffield.ac.uk"
                p2.href='mailto:polaris@sheffield.ac.uk'
                footer.appendChild(p2)

                fragment.appendChild(footer)

                document.getElementById(tableId).appendChild(fragment)

                filterTable();

            }

            /*Filter sequence by name*/
            function filterTable() {
                var tabId=document.getElementsByClassName('active')[0].getAttribute('onclick').split(" ")[1].replace(/\W/g, '');
                var tableId = tabId.substring(0,tabId.length-3);
                var table = document.getElementById(tableId);
                var tr = table.getElementsByTagName("tr");

                for (var i = 1; i < tr.length; i++) {
                    var td = tr[i].getElementsByTagName("td")[0];
                    if (td) {
                        if(sequences_Protocol[i-1].includes(tableId)){
                            
                            tr[i].style.display = "";

                            /*if (document.getElementById('proton').checked) {
                                if(sequences_Type[i-1].includes('Proton'))
                                {
                                    tr[i].style.display = "";
                                }
                            }*/

                            if (!document.getElementById('contrast').checked) {
                                if(sequences_Type[i-1].includes('Contrast'))
                                {
                                    tr[i].style.display = "none";
                                }
                            }

                            if (!document.getElementById('xenon').checked) {
                                if(sequences_Type[i-1].includes('Xenon'))
                                {
                                    tr[i].style.display = "none";
                                }
                            }
                        }
                        else
                        {
                            tr[i].style.display = "none";
                        }
                    }       
                }
            }

            function searchTable() {
                // Declare variables
                var input, filter, table, tr, td, i, txtValue;
                input = document.getElementById("myInput");
                filter = input.value.toUpperCase();

                var tabId=document.getElementsByClassName('active')[0].getAttribute('onclick').split(" ")[1].replace(/\W/g, '');
                var tableId = tabId.substring(0,tabId.length-3);
                table = document.getElementById(tableId);
                tr = table.getElementsByTagName("tr");

                // Loop through all table rows, and hide those who don't match the search query
                for (i = 0; i < tr.length; i++) {
                    tr[i].style.display = "none";

                    td = tr[i].getElementsByTagName("td")[0];
                    if (td) {
                    txtValue = td.textContent || td.innerText;

                    if (txtValue.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = "";
                    } else {
                        tr[i].style.display = "none";
                    }

                    if(sequences_Protocol[i-1].includes(tableId)){
                                
                        /*if (document.getElementById('proton').checked) {
                            if(sequences_Type[i-1].includes('Proton'))
                            {
                                tr[i].style.display = "";
                            }
                        }*/

                        if (!document.getElementById('contrast').checked) {
                            if(sequences_Type[i-1].includes('Contrast'))
                            {
                                tr[i].style.display = "none";
                            }
                        }

                        if (!document.getElementById('xenon').checked) {
                            if(sequences_Type[i-1].includes('Xenon'))
                            {
                                tr[i].style.display = "none";
                            }
                        }
                    }
                    else
                    {
                        tr[i].style.display = "none";
                    }
                    }
                }
            }

            function dropdownFunction() {
                 document.getElementById("myDropdown").classList.toggle("show");
             }

            // Close the dropdown menu if the user clicks outside of it
            window.onclick = function(event) {
                if (!event.target.matches('.dropbtn')) {
                    var dropdowns = document.getElementsByClassName("dropdown-content");
                    var i;
                    for (i = 0; i < dropdowns.length; i++) {
                        var openDropdown = dropdowns[i];
                        if (openDropdown.classList.contains('show')) {
                            openDropdown.classList.remove('show');
                        }
                    }
                }
            }
            //openField reacts when a row in the table is clicked filling that row with the linked information
            function openField(element,tableId) {
                var attributes = ["Sequence","Images","Details"];
                var row = element.closest('tr').rowIndex-1;
                var column = element.closest('td').cellIndex-1;
               // var myWindow = window.open("", "", "width=200,height=100");
                var currTR = element.closest('tr');

               // This row is already open - close it
                currTR.style.backgroundColor = "";
                currTR.style.color = "";

                if(currTR.hasAttribute('id'))//Main tab
                {
                    row_string = currTR.getAttribute('id');
                    row_number = row_string.substring(3,row_string.length);
                }
                else{//Details tab don't have id
                    row_string=currTR.getAttribute('class');
                    row_number = row_string.substring(3,row_string.length-7);
                }

                if(currTR && currTR.nextSibling && currTR.nextSibling.classList.contains(row_string+'details'))//Delete details if clicking on main tab and it is already open
                {
                    var elements = document.getElementsByClassName(row_string+'details');
                    while(elements.length > 0){
                        elements[0].parentNode.removeChild(elements[0]);
                    }
                }
                else if(row_string.includes('details')) {//Delete details when clicking on a detail tab
                   var elements = document.getElementsByClassName(row_string);
                   document.getElementsByClassName("Row"+row_number)[0].setAttribute("style","background-color:white;");
                   document.getElementsByClassName("Row"+row_number)[0].setAttribute("style","color:black;");

                    while(elements.length > 0){
                        elements[0].parentNode.removeChild(elements[0]);
                    }
                }
                else//Create details tabs when clicking main tab
                {
                    currTR.style.backgroundColor = '#64a1e8';
                    currTR.style.color = 'black';
                    var newTR = document.createElement("tr");
                    newTR.style.backgroundColor = '#a7c9f2';
                    newTR.style.color = 'black';

                    newTR.setAttribute('class',row_string+'details');//To identify the added rows

                    if (window.innerWidth > 960) {

                        //Add sequence definition
                        newTR.innerHTML = '<td style="background-color:black;color:white;" onclick="openField(this,'+"'"+tableId+"'"+')">'+sequences_Instructions[row_number]+'</td>';

                        if(tableId=="SEQ")//Only show healthy images in the general outlook
                        {
                            if(row_string.match(/\d+/)[0]=="0"||row_string.match(/\d+/)[0]=="1")
                            {
                                newTR.innerHTML =  newTR.innerHTML+"<td style='background-color:black;'></td>";
                            }
                            else if(row_string.match(/\d+/)[0]=="5")
                            {
                                newTR.innerHTML =  newTR.innerHTML+"<td style='background-color:black;'>\
                                    <div class='grid_single_small'>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/black.png' width=\"100%\" height=\"100%\"><figcaption></figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy TLC</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/black.png' width=\"100%\" height=\"100%\"><figcaption></figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/black.png' width=\"100%\" height=\"100%\"><figcaption></figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy RV</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/black.png' width=\"100%\" height=\"100%\"><figcaption></figcaption></figure>\
                                    </div></td>";
                            }
                            else if(row_string.match(/\d+/)[0]=="11")//DCE maps
                            {

                                //TODO: Not available healthy images yet 
                                newTR.innerHTML =  newTR.innerHTML+"<td style='background-color:black;'></td>";
                                /*newTR.innerHTML =  newTR.innerHTML+"<td style='background-color:black;'>\
                                    <div class='grid'>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy map</figcaption></figure>\
                                    </div></td>";*/
                            }
                            else if(row_string.match(/\d+/)[0]=="15")//Dissolved maps
                            {
                                newTR.innerHTML =  newTR.innerHTML+"<td style='background-color:black;'>\
                                    <div class='grid_single_small'>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/black.png' width=\"100%\" height=\"100%\"><figcaption></figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/black.png' width=\"100%\" height=\"100%\"><figcaption></figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/black.png' width=\"100%\" height=\"100%\"><figcaption></figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy RBC</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/black.png' width=\"100%\" height=\"100%\"><figcaption></figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/black.png' width=\"100%\" height=\"100%\"><figcaption></figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][2]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy RBC/TP</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/black.png' width=\"100%\" height=\"100%\"><figcaption></figcaption></figure>\
                                    </div></td>";
                            }
                            else if(row_string.match(/\d+/)[0]=="16")//Diffusion maps
                            {
                                newTR.innerHTML =  newTR.innerHTML+"<td style='background-color:black;'>\
                                    <div class='grid'>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy ADC</figcaption></figure>\
                                    </div></td>";
                            }
                            else{
                                newTR.innerHTML =  newTR.innerHTML+"<td style='background-color:black;'><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"50%\"><figcaption>Healthy</figcaption></figure></td>";
                            }
                        }
                        else{

                            //Multiple images for maps //"14","15"]
                            if(row_string.match(/\d+/)[0]=="0"||row_string.match(/\d+/)[0]=="1")
                            {
                                newTR.innerHTML =  newTR.innerHTML+"<td style='background-color:black;'></td>";
                            }
                            else if(row_string.match(/\d+/)[0]=="5")//SPGR maps
                            {
                                newTR.innerHTML =  newTR.innerHTML+"<td style='background-color:black;'>\
                                    <div class='grid'>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy TLC</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/"+tableId+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>"+tableId+" TLC</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy RV</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/"+tableId+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>"+tableId+" RV</figcaption></figure>\
                                    </div></td>";
                            }
                            else if(row_string.match(/\d+/)[0]=="11")//DCE maps
                            {
                                //TODO: Not available healthy images yet 

                                newTR.innerHTML =  newTR.innerHTML+"<td style='background-color:black;'>\
                                    <div class='grid'>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/"+tableId+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>"+tableId+"</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/"+tableId+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>"+tableId+" map</figcaption></figure>\
                                    </div></td>";
                                    /*                                <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy map</figcaption></figure>\*/
                            }
                            else if(row_string.match(/\d+/)[0]=="12"||row_string.match(/\d+/)[0]=="13")//XA QA || XA FA
                            {
                                newTR.innerHTML = newTR.innerHTML+"<td style='background-color:black;'> <div class='grid_single'><figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy</figcaption></figure></div></td>";
                            }
                            else if(row_string.match(/\d+/)[0]=="15")//Dissolved maps
                            {
                                var content = newTR.innerHTML+"<td style='background-color:black;'> <div class='grid'>";
                                    if(tableId=="ILD")
                                    {
                                        content = content+
                                    "<figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/"+tableId+"/IPF"+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>IPF</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy RBC</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/"+tableId+"/IPF"+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>IPF RBC</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][2]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy RBC/TP</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/"+tableId+"/IPF"+eval(sequence_name+attributes[1]+"["+row_number+"][2]")+"' width=\"100%\" height=\"100%\"><figcaption>IPF RBC/TP</figcaption></figure>";
                                    }
                                    else{
                                        content =  content+"<figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy</figcaption></figure>\
                                        <figure><img class='class_image' id='image_"+row_number+"' src='images/"+tableId+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>"+tableId+"</figcaption></figure>\
                                        <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy RBC</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/"+tableId+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>"+tableId+" RBC</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][2]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy RBC/TP</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/"+tableId+eval(sequence_name+attributes[1]+"["+row_number+"][2]")+"' width=\"100%\" height=\"100%\"><figcaption>"+tableId+" RBC/TP</figcaption></figure>";
                        
                                    }
                                    newTR.innerHTML = content + "</div></td>";;
                            }
                            else if(row_string.match(/\d+/)[0]=="16")//Diffusion maps
                            {
                                newTR.innerHTML =  newTR.innerHTML+"<td style='background-color:black;'>\
                                    <div class='grid'>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/"+tableId+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>"+tableId+"</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy ADC</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/"+tableId+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>"+tableId+" ADC</figcaption></figure>\
                                    </div></td>";
                            }
                            else{
                                newTR.innerHTML =  newTR.innerHTML+"<td style='background-color:black;'><div class='grid'>\
                                <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy</figcaption></figure>\
                                <figure><img class='class_image' id='image_"+row_number+"' src='images/"+tableId+eval(sequence_name+attributes[1]+"["+row_number+"]")+"' width=\"100%\" height=\"100%\"><figcaption>"+tableId+"</figcaption></figure>\
                                </div></td>";

                            }
                        }

                        //Add protocol info

                        newTR.innerHTML =  newTR.innerHTML+'<td><a target="_blank" href='+eval(sequence_name+attributes[2]+"["+row_number+"]")+'><img class="protocol" id="protocol_'+row_number+'" src='+ eval(sequence_name+attributes[2]+"["+row_number+"]")+" width=\"100%\"></a></td>";
                    }
                    else{//Smaller screens

                        //Add sequence definition
                        newTR.innerHTML = '<td colspan="3" style="background-color:black;color:white;" onclick="openField(this,'+"'"+tableId+"'"+')">'+sequences_Instructions[row_number]+'</td>';

                        var newTRmid = document.createElement("tr");
                        newTRmid.style.backgroundColor = '#a7c9f2';
                        newTRmid.style.color = 'black';

                        newTRmid.setAttribute('class',row_string+'details');//To identify the added rows

                        content = "<td colspan='3' style='background-color:black;' onclick='openField(this,"+'"'+tableId+'"'+")'>";

                        if(tableId=="SEQ")//Only show healthy images in the general outlook
                        {
                            if(row_string.match(/\d+/)[0]=="0"||row_string.match(/\d+/)[0]=="1")
                            {
                                content =  content +"</td>";
                            }
                            else if(row_string.match(/\d+/)[0]=="5")
                            {
                                content =  content + "<div class='grid_single_small'>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/black.png' width=\"100%\" height=\"100%\"><figcaption></figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy TLC</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/black.png' width=\"100%\" height=\"100%\"><figcaption></figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/black.png' width=\"100%\" height=\"100%\"><figcaption></figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy RV</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/black.png' width=\"100%\" height=\"100%\"><figcaption></figcaption></figure>\
                                    </div></td>";
                            }
                            else if(row_string.match(/\d+/)[0]=="11")//DCE maps
                            {

                                //TODO: Not available healthy images yet 
                                content =  content + "</td>";
                                /*newTR.innerHTML =  newTR.innerHTML+"<td style='background-color:black;'>\
                                    <div class='grid'>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy map</figcaption></figure>\
                                    </div></td>";*/
                            }
                            else if(row_string.match(/\d+/)[0]=="15")//Dissolved maps
                            {
                                content =  content + "<div class='grid_single_small'>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/black.png' width=\"100%\" height=\"100%\"><figcaption></figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/black.png' width=\"100%\" height=\"100%\"><figcaption></figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/black.png' width=\"100%\" height=\"100%\"><figcaption></figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy RBC</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/black.png' width=\"100%\" height=\"100%\"><figcaption></figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/black.png' width=\"100%\" height=\"100%\"><figcaption></figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][2]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy RBC/TP</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/black.png' width=\"100%\" height=\"100%\"><figcaption></figcaption></figure>\
                                    </div></td>";
                            }
                            else if(row_string.match(/\d+/)[0]=="16")//Diffusion maps
                            {
                                content =  content + "<div class='grid'>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy ADC</figcaption></figure>\
                                    </div></td>";
                            }
                            else{
                                content =  content + "<img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"50%\"><figcaption>Healthy</figcaption></figure></td>";
                            }
                        }
                        else{

                            content = "<td colspan='3' style='background-color:black;' onclick='openField(this,"+'"'+tableId+'"'+")'>";

                            //Multiple images for maps //"14","15"]
                            if(row_string.match(/\d+/)[0]=="0"||row_string.match(/\d+/)[0]=="1")
                            {
                                content =  content +"</td>";
                            }
                            else if(row_string.match(/\d+/)[0]=="5")//SPGR maps
                            {
                                content =  content + "<div class='grid'>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy TLC</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/"+tableId+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>"+tableId+" TLC</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy RV</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/"+tableId+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>"+tableId+" RV</figcaption></figure>\
                                    </div></td>";
                            }
                            else if(row_string.match(/\d+/)[0]=="11")//DCE maps
                            {
                                //TODO: Not available healthy images yet 

                                content =  content + "<div class='grid'>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/"+tableId+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>"+tableId+"</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/"+tableId+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>"+tableId+" map</figcaption></figure>\
                                    </div></tr>";
                                    /*                                <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy map</figcaption></figure>\*/
                            }
                            else if(row_string.match(/\d+/)[0]=="15")//Dissolved maps
                            {
                                content =  content + "<div class='grid'>";
                                    if(tableId=="ILD")
                                    {
                                        content = content+
                                    "<figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/"+tableId+"/IPF"+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>IPF</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy RBC</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/"+tableId+"/IPF"+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>IPF RBC</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][2]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy RBC/TP</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/"+tableId+"/IPF"+eval(sequence_name+attributes[1]+"["+row_number+"][2]")+"' width=\"100%\" height=\"100%\"><figcaption>IPF RBC/TP</figcaption></figure>";
                                    }
                                    else{
                                        content =  content+"<figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy</figcaption></figure>\
                                        <figure><img class='class_image' id='image_"+row_number+"' src='images/"+tableId+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>"+tableId+"</figcaption></figure>\
                                        <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy RBC</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/"+tableId+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>"+tableId+" RBC</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][2]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy RBC/TP</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/"+tableId+eval(sequence_name+attributes[1]+"["+row_number+"][2]")+"' width=\"100%\" height=\"100%\"><figcaption>"+tableId+" RBC/TP</figcaption></figure>";
                        
                                    }
                                    content = content + "</div></tr>";;
                            }
                            else if(row_string.match(/\d+/)[0]=="16")//Diffusion maps
                            {
                                content =  content + "<div class='grid'>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/"+tableId+eval(sequence_name+attributes[1]+"["+row_number+"][0]")+"' width=\"100%\" height=\"100%\"><figcaption>"+tableId+"</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy ADC</figcaption></figure>\
                                    <figure><img class='class_image' id='image_"+row_number+"' src='images/"+tableId+eval(sequence_name+attributes[1]+"["+row_number+"][1]")+"' width=\"100%\" height=\"100%\"><figcaption>"+tableId+" ADC</figcaption></figure>\
                                    </div></td>";
                            }
                            else{
                                content =  content + "<div class='grid'>\
                                <figure><img class='class_image' id='image_"+row_number+"' src='images/Healthy"+eval(sequence_name+attributes[1]+"["+row_number+"]")+"' width=\"100%\" height=\"100%\"><figcaption>Healthy</figcaption></figure>\
                                <figure><img class='class_image' id='image_"+row_number+"' src='images/"+tableId+eval(sequence_name+attributes[1]+"["+row_number+"]")+"' width=\"100%\" height=\"100%\"><figcaption>"+tableId+"</figcaption></figure>\
                                </div></tr>";
                            }
                        }

                        newTRmid.innerHTML =  content;

                        //Add protocol info

                        var newTRlow = document.createElement("tr");
                        newTRlow.style.backgroundColor = '#a7c9f2';
                        newTRlow.style.color = 'black';

                        newTRlow.setAttribute('class',row_string+'details');//To identify the added rows

                        newTRlow.innerHTML =  newTRlow.innerHTML+'<td colspan="3"><a href='+eval(sequence_name+attributes[2]+"["+row_number+"]")+'><img class="protocol" id="protocol_'+row_number+'" src='+ eval(sequence_name+attributes[2]+"["+row_number+"]")+" width=\"100%\"></a></td>";

                        currTR.parentNode.insertBefore(newTRlow, currTR.nextSibling);

                        currTR.parentNode.insertBefore(newTRmid, currTR.nextSibling);
                    }

                    currTR.parentNode.insertBefore(newTR, currTR.nextSibling);
                }
            }

        </script>
    </body>

 </html>